<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeftMonster's GitHub Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100vh;
            color: #fff;
            font-family: "SF Pro Display", "Segoe UI", "Roboto", Arial, sans-serif;
            overflow-x: hidden;
            animation: fadeIn 1.5s ease-in;
            position: relative;
        }

        /* 着色器背景画布 */
        #shaderCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            background: #000;
        }

        /* 背景遮罩层 */
        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.5));
            z-index: -1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            position: relative;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            max-width: 1000px;
            width: 100%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            animation: slideUp 1s ease-out 0.5s both;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .main-title {
            font-size: clamp(2.8rem, 6vw, 5rem);
            font-weight: 800;
            background: linear-gradient(135deg, #00d4ff 0%, #ff00ff 25%, #ffff00 50%, #00ff88 75%, #8000ff 100%);
            background-size: 300% 300%;
            animation: gradientShift 4s ease-in-out infinite, textGlow 2s ease-in-out infinite alternate;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            letter-spacing: -0.02em;
            line-height: 1.1;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes textGlow {
            0% {
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
            }
            100% {
                filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.6));
            }
        }

        .title-container {
            position: relative;
            display: inline-block;
            margin-bottom: 30px;
        }

        .title-decoration {
            position: absolute;
            top: -15px;
            left: -20px;
            right: -20px;
            bottom: -15px;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            border-radius: 20px;
            opacity: 0;
            animation: decorationPulse 3s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes decorationPulse {
            0%, 100% {
                opacity: 0;
                transform: scale(0.95);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
        }

        .subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
            margin-bottom: 20px;
        }

        .highlight-text {
            display: inline-block;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
            font-size: 1.1rem;
            margin: 20px 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .stats-section {
            text-align: center;
            margin: 30px 0;
        }

        .stats-image {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .stats-image:hover {
            transform: translateY(-5px);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .info-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }

        .info-list {
            list-style: none;
            text-align: left;
        }

        .info-list li {
            margin: 15px 0;
            padding: 10px 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .info-list li:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }

        .snake-animation {
            text-align: center;
            margin: 40px 0;
        }

        .snake-image {
            max-width: 100%;
            height: auto;
            border-radius: 15px;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .visitor-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .visitor-badge {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* 音频控制器美化 */
        .audio-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .audio-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-toggle:hover {
            transform: scale(1.1);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .glass-card {
                padding: 25px;
                margin: 20px;
            }

            .main-title {
                font-size: 2.5rem;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 200px;
            }
        }

        /* 加载动画 */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1s ease-out 2s forwards;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }
    </style>
</head>
<body>
<!-- 着色器背景 -->
<canvas id="shaderCanvas"></canvas>
<div class="background-overlay"></div>

<!-- 加载动画 -->
<div class="loading">
    <div class="spinner"></div>
</div>

<div class="container">
    <div class="glass-card" id="content">
        <div class="header">
            <div class="title-container">
                <div class="title-decoration"></div>
                <h1 class="main-title">⚡ Code • Create • Conquer ⚡</h1>
            </div>
            <p class="subtitle">Tokyo University • Cybersecurity Researcher • ML Engineer</p>
            <p class="highlight-text">🚀 Building the Future, One Algorithm at a Time 🚀</p>
        </div>


        <div class="info-grid">
            <div class="info-card">
                <ul class="info-list">
                    <li>🔭 Currently working at <strong>とうきょうだいがく</strong></li>
                    <li>🌱 Learning all kinds of <strong>CS (コンピュータサイエンス)</strong></li>
                    <li>👯 Looking to collaborate on innovative projects</li>
                    <li>🤔 Seeking help with advanced algorithms</li>
                </ul>
            </div>
            <div class="info-card">
                <ul class="info-list">
                    <li>📫 Focus: <strong>Data Science & CyberSecurity【赛博保安】</strong></li>
                    <li>😄 Pronouns: Developer/Researcher</li>
                    <li>⚡ Fun fact: Music-driven coding enthusiast</li>
                    <li>🎵 Current BGM: Sultan.mp3</li>
                </ul>
            </div>
        </div>


        <div class="controls">
            <button class="btn btn-primary" onclick="toggleMusic()">🎵 Toggle Music</button>
            <button class="btn btn-secondary" onclick="toggleLanguage()">🌐 中文 / English</button>
        </div>

        <div class="footer">
            <div class="visitor-counter">
                <span>👀 Visitors:</span>
                <img src="https://visitor-badge.laobi.icu/badge?page_id=LeftMonster.github-page"
                     alt="Visitor Badge" class="visitor-badge">
            </div>
        </div>
    </div>
</div>

<!-- 音频控制 -->
<div class="audio-controls">
    <button class="audio-toggle" onclick="toggleMusic()" id="audioBtn">
        🎵
    </button>
</div>

<!-- 音频元素 -->
<audio id="bgMusic" loop>
    <source src="music/where_winds_meet.mp3" type="audio/mpeg" data-title="Unknown Track">
    <source src="music/Sultan.mp3" type="audio/mpeg" data-title="Sultan">
    Your browser does not support the audio element.
</audio>

<script>
    let isEnglish = true;
    let isPlaying = false;
    let currentTrackName = '';
    const audio = document.getElementById('bgMusic');
    const audioBtn = document.getElementById('audioBtn');
    const content = document.getElementById('content');
    const currentTrackElement = document.getElementById('currentTrack');

    // 着色器相关变量
    let shaderRenderer, animationFrame;

    // 获取当前播放音乐的名称
    function getCurrentTrackName() {
        // 尝试从音频源获取音乐名称
        const sources = audio.querySelectorAll('source');
        for (let source of sources) {
            // 检查哪个音频源可以播放
            if (audio.canPlayType(source.type)) {
                const title = source.getAttribute('data-title');
                if (title) {
                    return title;
                }
                // 如果没有设置data-title，从文件路径提取
                const src = source.src;
                const filename = src.split('/').pop().split('.')[0];
                return filename.charAt(0).toUpperCase() + filename.slice(1);
            }
        }
        return 'Unknown Track';
    }

    // 更新当前播放音乐显示
    function updateCurrentTrack() {
        currentTrackName = getCurrentTrackName();
        if (currentTrackElement) {
            currentTrackElement.textContent = currentTrackName;
            currentTrackElement.style.color = '#00ff88';
            currentTrackElement.style.fontWeight = 'bold';
        }
        // 同时更新中文版本的显示
        const currentTrackCN = document.getElementById('currentTrackCN');
        if (currentTrackCN) {
            currentTrackCN.textContent = currentTrackName;
            currentTrackCN.style.color = '#00ff88';
            currentTrackCN.style.fontWeight = 'bold';
        }
    }

    // 着色器渲染器类
    class ShaderRenderer {
        constructor(canvas) {
            this.canvas = canvas;
            this.gl = canvas.getContext("webgl2");
            this.startTime = Date.now();
            this.mouseX = 0;
            this.mouseY = 0;

            this.vertexShaderSource = `#version 300 es
          precision highp float;
          in vec4 position;
          void main(){gl_Position=position;}`;

            this.fragmentShaderSource = `#version 300 es
          precision highp float;
          out vec4 O;
          uniform float time;
          uniform vec2 resolution;
          uniform vec2 move;
          #define FC gl_FragCoord.xy
          #define R resolution
          #define T time
          #define N normalize
          #define S smoothstep
          #define MN min(R.x,R.y)
          #define rot(a) mat2(cos((a)-vec4(0,11,33,0)))
          #define csqr(a) vec2(a.x*a.x-a.y*a.y,2.*a.x*a.y)

          float rnd(vec3 p) {
            p=fract(p*vec3(12.9898,78.233,156.34));
            p+=dot(p,p+34.56);
            return fract(p.x*p.y*p.z);
          }

          float swirls(in vec3 p) {
            float d=.0;
            vec3 c=p;
            for(float i=min(.0,time); i<9.; i++) {
              p=.7*abs(p)/dot(p,p)-.7;
              p.yz=csqr(p.yz);
              p=p.zxy;
              d+=exp(-19.*abs(dot(p,c)));
            }
            return d;
          }

          vec3 march(in vec3 p, vec3 rd) {
            float d=.2, t=.0, c=.0, k=mix(.9,1.,rnd(rd)),
            maxd=length(p)-1.;
            vec3 col=vec3(0);
            for(float i=min(.0,time); i<120.; i++) {
              t+=d*exp(-2.*c)*k;
              c=swirls(p+rd*t);
              if (t<5e-2 || t>maxd) break;
              col+=vec3(c*c,c/1.05,c)*8e-3;
            }
            return col;
          }

          float rnd(vec2 p) {
            p=fract(p*vec2(12.9898,78.233));
            p+=dot(p,p+34.56);
            return fract(p.x*p.y);
          }

          vec3 sky(vec2 p, bool anim) {
            p.x-=.17-(anim?2e-4*T:.0);
            p*=500.;
            vec2 id=floor(p), gv=fract(p)-.5;
            float n=rnd(id), d=length(gv);
            if (n<.975) return vec3(0);
            return vec3(S(3e-2*n,1e-3*n,d*d));
          }

          void cam(inout vec3 p) {
            p.yz*=rot(move.y*6.3/MN-T*.05);
            p.xz*=rot(-move.x*6.3/MN+T*.025);
          }

          void main() {
            vec2 uv=(FC-.5*R)/MN;
            vec3 col=vec3(0),
            p=vec3(0,0,-16),
            rd=N(vec3(uv,1)), rdd=rd;
            cam(p); cam(rd);
            col=march(p,rd);
            col=S(-.2,.9,col);
            vec2 sn=.5+vec2(atan(rdd.x,rdd.z),atan(length(rdd.xz),rdd.y))/6.28318;
            col=max(col,vec3(sky(sn,true)+sky(2.+sn*2.,true)));
            float t=min((time-.5)*.3,1.);
            uv=FC/R*2.-1.;
            uv*=.7;
            float v=pow(dot(uv,uv),1.8);
            col=mix(col,vec3(0),v);
            col=mix(vec3(0),col,t);
            col=max(col,.08);
            O=vec4(col,1);
          }`;

            this.vertices = [-1, 1, -1, -1, 1, 1, 1, -1];
            this.init();
        }

        init() {
            const gl = this.gl;
            if (!gl) return;

            // 创建着色器
            const vertexShader = this.createShader(gl.VERTEX_SHADER, this.vertexShaderSource);
            const fragmentShader = this.createShader(gl.FRAGMENT_SHADER, this.fragmentShaderSource);

            // 创建程序
            this.program = gl.createProgram();
            gl.attachShader(this.program, vertexShader);
            gl.attachShader(this.program, fragmentShader);
            gl.linkProgram(this.program);

            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {
                console.error('程序链接失败:', gl.getProgramInfoLog(this.program));
                return;
            }

            // 创建缓冲区
            this.buffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);

            // 获取属性位置
            const position = gl.getAttribLocation(this.program, "position");
            gl.enableVertexAttribArray(position);
            gl.vertexAttribPointer(position, 2, gl.FLOAT, false, 0, 0);

            // 获取uniform位置
            this.uniforms = {
                resolution: gl.getUniformLocation(this.program, "resolution"),
                time: gl.getUniformLocation(this.program, "time"),
                move: gl.getUniformLocation(this.program, "move")
            };

            this.resize();
        }

        createShader(type, source) {
            const gl = this.gl;
            const shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);

            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                console.error('着色器编译失败:', gl.getShaderInfoLog(shader));
                gl.deleteShader(shader);
                return null;
            }

            return shader;
        }

        resize() {
            const gl = this.gl;
            const canvas = this.canvas;
            const dpr = window.devicePixelRatio || 1;

            canvas.width = window.innerWidth * dpr;
            canvas.height = window.innerHeight * dpr;
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';

            gl.viewport(0, 0, canvas.width, canvas.height);
        }

        render() {
            const gl = this.gl;
            if (!this.program) return;

            const time = (Date.now() - this.startTime) * 0.001;

            gl.clearColor(0, 0, 0, 1);
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.useProgram(this.program);
            gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);

            // 设置uniforms
            gl.uniform2f(this.uniforms.resolution, this.canvas.width, this.canvas.height);
            gl.uniform1f(this.uniforms.time, time);
            gl.uniform2f(this.uniforms.move, this.mouseX, this.mouseY);

            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);

            animationFrame = requestAnimationFrame(() => this.render());
        }

        updateMouse(x, y) {
            this.mouseX = x;
            this.mouseY = y;
        }
    }

    // 初始化着色器背景
    function initShaderBackground() {
        const canvas = document.getElementById('shaderCanvas');
        shaderRenderer = new ShaderRenderer(canvas);

        // 鼠标移动事件
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth) * 2 - 1;
            const y = -((e.clientY / window.innerHeight) * 2 - 1);
            shaderRenderer.updateMouse(x * 100, y * 100);
        });

        // 窗口大小改变事件
        window.addEventListener('resize', () => {
            shaderRenderer.resize();
        });

        // 开始渲染
        shaderRenderer.render();
    }

    // 页面加载完成后自动尝试播放音乐
    document.addEventListener('DOMContentLoaded', function () {
        // 初始化着色器背景
        initShaderBackground();

        // 更新音乐名称显示
        updateCurrentTrack();

        // 设置较低的音量开始
        audio.volume = 0.3;

        // 尝试自动播放
        attemptAutoplay();

        // 移除加载动画
        setTimeout(() => {
            document.querySelector('.loading').style.display = 'none';
        }, 2000);
    });

    // 尝试自动播放音乐 - 更强制的方法
    function attemptAutoplay() {
        // 方法1: 直接播放
        audio.play().then(() => {
            isPlaying = true;
            audioBtn.textContent = '🔊';
            console.log('音乐自动播放成功');
        }).catch(() => {
            // 方法2: 用户交互后播放
            console.log('尝试在用户交互后播放');

            // 尝试多种用户交互事件
            const events = ['click', 'touchstart', 'touchend', 'mousedown', 'keydown'];

            const playOnInteraction = () => {
                audio.play().then(() => {
                    isPlaying = true;
                    audioBtn.textContent = '🔊';
                    console.log('用户交互后音乐播放成功');
                    // 移除所有事件监听器
                    events.forEach(event => {
                        document.removeEventListener(event, playOnInteraction);
                    });
                }).catch(console.error);
            };

            // 为多种事件添加监听器
            events.forEach(event => {
                document.addEventListener(event, playOnInteraction, {once: true, passive: true});
            });

            // 设置定时器，定期尝试播放
            const tryPlay = setInterval(() => {
                audio.play().then(() => {
                    isPlaying = true;
                    audioBtn.textContent = '🔊';
                    clearInterval(tryPlay);
                    console.log('定时尝试播放成功');
                }).catch(() => {
                    // 静默失败，继续尝试
                });
            }, 1000);

            // 10秒后停止尝试
            setTimeout(() => clearInterval(tryPlay), 10000);
        });
    }

    // 切换音乐播放状态
    function toggleMusic() {
        if (isPlaying) {
            audio.pause();
            audioBtn.textContent = '🎵';
            isPlaying = false;
        } else {
            audio.play().then(() => {
                audioBtn.textContent = '🔊';
                isPlaying = true;
            }).catch(console.error);
        }
    }

    // 语言切换功能
    function toggleLanguage() {
        if (isEnglish) {
            content.innerHTML = `
          <div class="header">
            <div class="title-container">
              <div class="title-decoration"></div>
              <h1 class="main-title">⚡ 代码 • 创造 • 征服 ⚡</h1>
            </div>
            <p class="subtitle">东京大学 • 网络安全研究员 • 机器学习工程师</p>
            <p class="highlight-text">🚀 构建未来，一个算法接一个算法 🚀</p>
          </div>

          <div class="stats-section">
            <img src="https://github-readme-stats.vercel.app/api?username=leftmonster&include_all_commits=true&count_private=true&custom_title=leftmonster%27s%20GitHub%20Stats&line_height=30&show_icons=true&hide_border=true&bg_color=192133&title_color=efb752&icon_color=efb752&text_color=70bed9"
                 alt="GitHub Stats" class="stats-image">
          </div>

          <div class="info-grid">
            <div class="info-card">
              <h3 style="color: #00d4ff; margin-bottom: 20px; font-size: 1.3rem;">🛠️ 技术栈</h3>
              <ul class="info-list">
                <li>🐍 <strong>Python</strong> - 数据科学与机器学习框架</li>
                <li>🦀 <strong>Rust</strong> - 系统编程与性能优化</li>
                <li>⚡ <strong>C++</strong> - 高性能计算</li>
                <li>🔍 <strong>逆向工程</strong> - Web与Windows分析</li>
              </ul>
            </div>
            <div class="info-card">
              <h3 style="color: #ff00ff; margin-bottom: 20px; font-size: 1.3rem;">🎯 专业领域</h3>
              <ul class="info-list">
                <li>🤖 <strong>机器学习</strong> - 高级算法与模型</li>
                <li>📊 <strong>数据科学</strong> - 分析与洞察</li>
                <li>🛡️ <strong>网络安全</strong> - 威胁分析与防御</li>
                <li>🏛️ 目前在 <strong>とうきょうだいがく</strong></li>
                <li>🎵 正在播放: <span id="currentTrackCN">加载中...</span></li>
              </ul>
            </div>
          </div>

          <div class="snake-animation">
            <img src="https://github.com/LeftMonster/leftmonster/blob/main/github-contribution-grid-snake.svg"
                 alt="GitHub贡献蛇形图" class="snake-image">
          </div>

          <div class="controls">
            <button class="btn btn-primary" onclick="toggleMusic()">🎵 切换音乐</button>
            <button class="btn btn-secondary" onclick="toggleLanguage()">🌐 English / 中文</button>
          </div>

          <div class="footer">
            <div class="visitor-counter">
              <span>👀 历史访问人数:</span>
              <img src="https://visitor-badge.laobi.icu/badge?page_id=LeftMonster.github-page"
                   alt="访客徽章" class="visitor-badge">
            </div>
          </div>
        `;
            isEnglish = false;
        } else {
            location.reload(); // 重新加载页面恢复英文版本
        }
    }

    // 音频事件监听
    audio.addEventListener('loadstart', () => {
        console.log('开始加载音频');
        updateCurrentTrack();
    });
    audio.addEventListener('canplay', () => {
        console.log('音频可以播放');
        updateCurrentTrack();
    });
    audio.addEventListener('loadedmetadata', () => {
        console.log('音频元数据加载完成');
        updateCurrentTrack();
    });
    audio.addEventListener('error', (e) => {
        console.error('音频加载错误:', e);
        if (currentTrackElement) {
            currentTrackElement.textContent = 'Audio Error';
            currentTrackElement.style.color = '#ff4444';
        }
        const currentTrackCN = document.getElementById('currentTrackCN');
        if (currentTrackCN) {
            currentTrackCN.textContent = '音频错误';
            currentTrackCN.style.color = '#ff4444';
        }
    });

    // 页面可见性变化时暂停/恢复音乐
    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            // 页面不可见时暂停音乐
            if (isPlaying && !audio.paused) {
                audio.pause();
                audioBtn.textContent = '⏸️';
                console.log('页面切换，音乐已暂停');
            }
        } else {
            // 页面重新可见时恢复音乐
            if (isPlaying && audio.paused) {
                audio.play().then(() => {
                    audioBtn.textContent = '🔊';
                    console.log('页面重新激活，音乐已恢复');
                }).catch(console.error);
            }
        }
    });

    // 页面失去焦点时暂停音乐
    window.addEventListener('blur', function () {
        if (isPlaying && !audio.paused) {
            audio.pause();
            audioBtn.textContent = '⏸️';
            console.log('窗口失去焦点，音乐已暂停');
        }
    });

    // 页面获得焦点时恢复音乐
    window.addEventListener('focus', function () {
        if (isPlaying && audio.paused) {
            audio.play().then(() => {
                audioBtn.textContent = '🔊';
                console.log('窗口重新获得焦点，音乐已恢复');
            }).catch(console.error);
        }
    });

    // 页面卸载时清理资源
    window.addEventListener('beforeunload', function () {
        if (animationFrame) {
            cancelAnimationFrame(animationFrame);
        }
    });
</script>
</body>
</html>